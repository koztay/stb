{% extends "__base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

<script>
    {% block jquery %}
        $('#quick-view-modal').on('show.bs.modal', function (event) {

        var button = $(event.relatedTarget); // Button that triggered the modal
        var title = button.data('title'); // Extract info from data-* attributes
        var description = button.data('description');
        var price = button.data('price');
        var saleprice = button.data('saleprice');
        var url = button.data('url');
        var imagehd = button.data('imagehd');
        var imagesd = button.data('imagesd');
        var imagemedium = button.data('imagemedium');
        var imagemicro = button.data('imagemicro');
        var category = button.data('category');
        var category_url = button.data('category_url');

  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or
  // other methods instead.

        var modal = $(this);
        modal.find('.modal-product-title').text(title);
        modal.find(".modal-product-description").text(description);
        modal.find('.view-product-details').attr("href", url);
        modal.find('.simpleLens-big-image').attr("src", imagemedium);
        modal.find('.simpleLens-lens-image').attr('data-lens-image', imagehd);
{#        modal.find('.simpleLens-thumbnail-wrapper').attr('data-lens-image', imagemedium);#}
{#        modal.find('.simpleLens-thumbnail-wrapper').attr('data-big-image', imagemedium);#}
{#        modal.find('.simpleLens-thumbnail-wrapper').attr('src', imagemedium);#}
        modal.find('.category-url').attr("href", category_url);
        modal.find(".category-url").text(category);

        if (saleprice > 0){

            var element = modal.find('.aa-product-view-price');
            element.text('');
            var spansale = document.createElement("span");
            var nodesale = document.createTextNode(saleprice + ' ,-₺ ');
            spansale.appendChild(nodesale);
            element[0].appendChild(spansale);

            var spanprice = document.createElement("span");
            var del = document.createElement("del");
            var nodeprice = document.createTextNode(price + ' ,-₺ ');
            del.appendChild(nodeprice);
            spanprice.appendChild(del);
            element[0].appendChild(spanprice);

        }else{
            //console.log("burası çalışmamalı");
            modal.find('.aa-product-view-price').text(price + ' ,-₺ ');
        }


});
    {% endblock %}
</script>

{% block messages %}
    {% include '_messages.html' %}
{% endblock %}

{% block sliders %}
    {% include "visual_site_elements/sliders/sliders.html" with object_list=sliders %}
{% endblock %}

{% block content %}

{% endblock %}


{% block promotions %}
    {% include "visual_site_elements/promotions/promotions.html" with object_list=promotions %}
{% endblock %}

{% block products %}
{#    {% include '_products_section.html' %}#}
    {% include "products/home_page_products.html" with object_list=products %}
{% endblock %}

{% block banners %}
    {% include "visual_site_elements/horizontal_banner/horizontal_banner.html" with object_list=horizontal_banner %}
{% endblock %}

{% block popular %}
{#    {% include '_popular_section.html' %}#}
    {% include "products/home_page_selected_products.html" with object_list=products2 %}
{% endblock %}

{% block support %}
    {% include '_support_section.html' %}
{% endblock %}

{% block testimonial %}
    {% include 'visual_site_elements/testimonials/testimonials.html' with object_list=testimonials %}
{% endblock %}

{% block blog %}
{#    {% include '_blog_section.html' %}#}
{% endblock %}

{% block brands %}
    {% include '_client_brand_section.html' %}
{% endblock %}

{% block subscribe %}
    {% include '_subscribe_section.html' with form=form %}
{% endblock %}

{% block custom_javascripts %}
<!-- SmartMenus jQuery plugin -->
<script type="text/javascript" src="{% static 'js/jquery.smartmenus.js' %}"></script>
<!-- SmartMenus jQuery Bootstrap Addon -->
<script type="text/javascript" src="{% static 'js/jquery.smartmenus.bootstrap.js' %}"></script>
<!-- To Slider JS -->
<script src="{% static 'js/sequence.js' %}"></script>
<script src="{% static 'js/sequence-theme.modern-slide-in.js' %}"></script>
<!-- Product view slider -->
<script type="text/javascript" src="{% static 'js/jquery.simpleGallery.js' %}"></script>
<script type="text/javascript" src="{% static 'js/jquery.simpleLens.js' %}"></script>
<!-- slick slider -->
<script type="text/javascript" src="{% static 'js/slick.js' %}"></script>
<!-- Price picker slider -->
<script type="text/javascript" src="{% static 'js/nouislider.js' %}"></script>
{% endblock %}








